@model APIFruverOne.Models.ListaProductos
@{
    ViewBag.Title = "Listar productos";

}
<br />
<h1>Listado de productos</h1>
<br />

<div class="row">
    <div class="col-md-12">
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">COD</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Descripcion</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Valor</th>
                    <th scope="col">Total</th>
                    <th scope="col">Opción</th>
                </tr>
            </thead>
            <tbody>
                @for (int i=0; i <Model.productos.Count; i++) { 
                <tr>
                    <td>@Model.productos[i].COD</td>
                    <td>@Model.productos[i].Nombre</td>
                    <td>@Model.productos[i].Descripcion</td>
                    <td>@Model.productos[i].Cantidad</td>
                    <td>@Model.productos[i].Precio</td>
                    <td>@Model.productos[i].Total</td>
                    <td>
                        <button type="button" onclick="Eliminar(@Model.productos[i].COD);" class="btn btn-danger" value="Eliminar">Eliminar</button>
                    
                    </td>
                </tr>
                
                }
                
            </tbody>
        </table>
    </div>
</div>


<script>

    function Eliminar(COD) {
        var URL = "https://localhost:44304/api/ListarProductos?COD=" + COD;
        $.post(URL, function (data) {

            if (data) {
                alert("Se eliminó correctamente");

                document.location.href = "https://localhost:44304/";
            } else {
                alert("Falla al eliminar");
            }
        })

    }




</script>
